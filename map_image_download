import cv2
import imutils 

# Set the map parameters to use in the URL
# https://developers.google.com/maps/documentation/maps-static/start
latitude, longitude = 28.6048761, 77.1982977
map_zoom = 18
image_size = 640 # 640x640
map_scale = 1
map_type = 'satellite'
gmap_api_key = 'INSERT-YOUR-KEY-HERE'

# Create/download image from URL and save it
def save_map_image(url, file_save_path):
    # Get the map image from the URL 
    # Using the url_to_image function from https://github.com/jrosebr1/imutils
    map_image = imutils.url_to_image(url)

    # Write the map image
    cv2.imwrite(file_save_path, map_image)

    # Display the image
    # cv2.imshow("URL to Image", map_image)
    # cv2.waitKey(0)
    
if __name__ == '__main__':
    # Create Google Maps URL
    url = "https://maps.googleapis.com/maps/api/staticmap?center={0},{1}&zoom={2}&size={3}x{3}&scale={4}&maptype={5}&key={6}".format(
        latitude, longitude, map_zoom, image_size, map_scale, map_type, gmap_api_key
    )
    
    save_map_image(url, "map_image.png")
